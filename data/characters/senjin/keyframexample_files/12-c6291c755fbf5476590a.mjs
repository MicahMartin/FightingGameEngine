(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[12],{"2i+x":function(e,t,i){i.d(t,"a",(function(){return a}));const a=e=>{const{thumbnail:t,url:i,width:a,height:n,duration:s}=e||{};return t&&i&&a&&n&&{thumbnail:t,url:i,width:a,height:n,duration:s}||void 0}},"51gp":function(e,t,i){i.d(t,"a",(function(){return S}));var a=i("nKUr"),n=i("q1tI"),s=i("sEfC"),o=i.n(s),r=i("qrav");var l=i("BEAQ"),c=i("jgRP"),d=i("9pre"),h=i("U4JR"),u=i("n6mq");function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const m=[0,.25,.5,.75,.95,.97],y=[0,.5,.8,1],b={threshold:y},v={rootMargin:"-64px 0px 0px 0px",threshold:d.c},f=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function g(){return(new Date).getTime()}function P(e){return!!e.volume&&e.volume>0}class S extends n.Component{constructor(e){super(e),p(this,"videoWrapperRef",Object(n.createRef)()),p(this,"handleWindowResize",()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),p(this,"handlePlayheadDown",({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),p(this,"handlePlayheadUp",({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),p(this,"handleLoop",()=>{this.videoTime=0}),p(this,"handleTimeChange",e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const a=1e3*e.time,n=function(e,t,i,a){if(e>t)return null;if(i<=0)return null;for(const n of a){const a=n*i;if(e<=a&&t>a)return n}return null}(this.videoTime,a,this.currentInterval.videoDuration,m);if("number"==typeof n&&this.props.playing&&!t&&i){const e=g();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*n),quartilePercentValue:n})}this.videoTime=a,this.props.onTimeChange&&this.props.onTimeChange(e)}),p(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),p(this,"handleReady",e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),p(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),p(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],a=function(e,t){for(let i=0;i<t.length;i+=1){const a=t[i],n=t[i+1];if(null==n)return a;if(a<=e&&e<n)return a}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),y);null==a||a===this.currentInterval.viewability||this.fullscreen||(0===a?this.startNewInterval({viewability:a,playbackState:f.PAUSED}):this.startNewInterval({viewability:a}))}),p(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),p(this,"handleClose",()=>{this.startNewInterval()}),p(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1};const t=g();this.handleWindowResize=o()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:P(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};P(e)&&!P(this.props)?i.isAudible=!1:!P(e)&&P(this.props)&&(i.isAudible=!0);const a=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==a&&(i.playbackState=a),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?f.PLAYING:f.PAUSED:f.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:i}=this.props,{height:a,width:n,windowHeight:s,windowWidth:o,viewability:r,...l}=t;if(null!=a&&null!=n&&null!=s&&null!=o&&null!=r){const t={...l,height:a,width:n,windowHeight:s,windowWidth:o,viewability:r};Object(h.b)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:a,videoStartTime:n,videoEndTime:s,isAudible:o,height:r,width:l,playbackState:c,quartile:d,quartilePercentValue:h,windowHeight:u,windowWidth:p,viewability:m}},...y}=e;return{...y,eventData:{videoEventData:{videoDuration:t,time:i,endTime:a,videoTime:n,endVideoTime:s,isAudible:o,height:r,width:l,playbackState:c,quartile:d,quartilePercentValue:h,windowHeight:u,windowWidth:p,viewability:m}}}}({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=g();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=g();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:d,captions:h,contextLogData:u,controls:p,cropHeight:m,hlsConfig:y,inAdsDesktopVideoExperiment:f,loop:g,objectFit:P,onLoadedChange:S,onPause:T,onPlay:w,onSeek:L,onVolumeChange:k,playbackRate:E,playing:D,playsInline:R,poster:O,preload:V,rootMargin:I,src:j,surface:M,videoStartTime:C,volume:_}=this.props,{seeking:A}=this.state,x=f?v:b;return void 0!==I&&(x.rootMargin=M?Object(c.a)(M):I),Object(a.jsx)(r.a,{options:x,onVisibilityChange:this.handleVisibilityChange,children:Object(a.jsx)("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,style:m?{display:"flex",alignItems:"center",height:"236px"}:{},children:Object(a.jsx)(l.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:d,captions:h,contextLogData:u,controls:p,hlsConfig:y,loop:g,objectFit:P,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:S,onLoop:this.handleLoop,onPause:T,onPlay:w,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:L,onTimeChange:this.handleTimeChange,onVolumeChange:k,playbackRate:E,playing:!A&&D,playsInline:R,poster:O,preload:V,src:j,videoStartTime:C,volume:_})})})}}p(S,"defaultProps",u.fb.defaultProps)},"7jH2":function(e,t,i){i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n.a})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return h})),i.d(t,"h",(function(){return u})),i.d(t,"k",(function(){return m})),i.d(t,"l",(function(){return y})),i.d(t,"m",(function(){return b})),i.d(t,"n",(function(){return v})),i.d(t,"i",(function(){return f})),i.d(t,"j",(function(){return g})),i.d(t,"o",(function(){return P})),i.d(t,"p",(function(){return S})),i.d(t,"q",(function(){return T.a})),i.d(t,"r",(function(){return w})),i.d(t,"s",(function(){return E})),i.d(t,"t",(function(){return D})),i.d(t,"u",(function(){return R})),i.d(t,"v",(function(){return O})),i.d(t,"w",(function(){return V})),i.d(t,"x",(function(){return I})),i.d(t,"y",(function(){return M})),i.d(t,"z",(function(){return C})),i.d(t,"A",(function(){return _})),i.d(t,"B",(function(){return x}));var a=({closeupPaneWidth:e,imgSrc:t,isGif:i,pin:a})=>{const n=P(Object(T.a)({pin:a})),{image564x:s={}}=y(n)||{},{imageOrig:o={}}=v(n)||{},r=0===Object.keys(s).length?o:s,l=r.height,c=r.width,{image236x:d={}}=m(P(Object(T.a)({pin:a})))||{},h=d.url,u=Math.max(Math.min(c,e),60),p=u/c*l;return{alt:a.description,src:i?t:h,naturalHeight:p,naturalWidth:u}},n=i("Nle8");function s(e){return!e.is_promoted}var o=e=>{const t=(e||[]).reduce((e,t)=>t.name?e.concat({name:t.name}):e,[]);return t.length>0?t:null};function r(e){if(e&&e.pin){const t=e.pin.rich_metadata;if(t)return t.products?144:t.article?141:t.recipe?145:139;if(e.pin.story_pin_data)return 157}return 140}var l=i("pOug");var c=Object(l.a)(e=>{const{richMetadata:t}=e,{article:i}=t,{name:a,description:n,authors:s,date_published:r}=i||{};return a?{...e,article:{name:a,description:n,authors:o(s),datePublished:r&&new Date(r)||void 0}}:null});var d=Object(l.a)(e=>{const{attribution:t}=e.pin,{author_url:i,url:a,author_name:n,title:s,provider_name:o,cc_url:r,embed:l}=t||{};return o&&a?{...e,attribution:{providerUrl:a,providerName:o,title:s,authorUrl:i,authorName:n,ccUrl:r,embed:l}}:null});var h=Object(l.a)(e=>{const{categorizedIngredients:t}=e.recipe;return t&&t.length>0?{...e,categorizedIngredients:t}:null});var u=Object(l.a)(e=>{const{display_name:t}=e.richSummary;return t?{...e,displayName:t}:null});const p=e=>t=>{const{images:i}=t,a=i[e],{url:n,width:s,height:o}=a||{};return n&&s&&o?{url:n,width:s,height:o}:null},m=Object(l.a)(e=>{const t=p("236x")(e);return t&&{...e,image236x:t}}),y=Object(l.a)(e=>{const t=p("564x")(e);return t&&{...e,image564x:t}}),b=Object(l.a)(e=>{const t=p("736x")(e);return t&&{...e,image736x:t}});var v=Object(l.a)(e=>{const{images:t}=e,i=t.orig,{url:a,width:n,height:s}=i||{};return a&&n&&s?{...e,imageOrig:{url:a,width:n,height:s}}:null});var f=Object(l.a)(e=>{const{embed:t}=e.pin,{type:i,src:a,subtype:n}=t||{},{attribution:s={}}=d(e)||{},{embed:o={}}=s,{src:r}=o,l=a||r;return l?{...e,embed:{type:i,src:l,subtype:n}}:null});var g=Object(l.a)(e=>{const{embed:t}=f(Object(T.a)(e))||{};return!(!t||!t.src||"pinstory"===t.subtype||"gif"===t.type)?{...e,embed:{...t}}:null});var P=Object(l.a)(e=>{const{pin:t}=e,{images:i}=t,a=Object.keys(i||{}).reduce((e,t)=>{const a=i[t],{url:n,width:s,height:o}=a;return e&&n&&s&&o?{...e,[t]:{url:n,width:s,height:o}}:null},{});return a&&Object.keys(a).length>0?{...e,images:a}:null});var S=Object(l.a)(e=>{const{products:t=null}=D(e)&&w(D(e))||{},{pin:i}=e,{tracked_link:a,link:n,method:s}=i,o=a||n,r=o&&("catalog_bulk_create"===s||!!t)?decodeURIComponent(o):o;return r?{...e,link:r}:null}),T=i("O1y+");Object(l.a)(e=>{const{pin:t}=e,{aggregated_pin_data:i}=t,{pin_tags:a}=i||{};return a?{...e,pinTags:a}:null});var w=Object(l.a)(e=>{const{pin:t,richMetadata:i}=e,{buyable_availability:a}=t,{products:n}=i,s=Array.isArray(n)?n.map(e=>{const{name:t,offer_summary:i}=e,{in_stock:n,min_price:s,max_price:o,price:r}=i||{};let l=null;return void 0!==s&&void 0!==o?l=`${s} - ${o}`:void 0!==r&&(l=""+r),t?{name:t,outOfStock:!1===a||!1===n,priceText:l}:null}).filter(e=>null!==e):[];return s.length>0?{...e,products:{first:s[0],rest:s.slice(1)}}:null}),L=i("PsyL");const k=e=>{const{h:t,m:i}=e||{},a={hours:t||0,minutes:i||0};return void 0!==t||void 0!==i?{h:t,m:i,time:a,isoDuration:Object(L.a)(a)}:null};var E=Object(l.a)(e=>{const{richMetadata:t}=e,{recipe:i}=t,{name:a,categorized_ingredients:n,diets:s,from_aggregated_data:o,cook_times:r,servings_summary:l}=i||{},{total:c,cook:d,prep:h}=r||{},{summary:u}=l||{},p=k(h),m=k(d),y=k(c);return a?{...e,recipe:{name:a,categorizedIngredients:n,diets:s,fromAggregatedData:o,prepTime:p,cookTime:m,totalTime:y,servingSummary:u}}:null});var D=Object(l.a)(e=>{const{rich_metadata:t}=e.pin;return t?{...e,richMetadata:t}:null});var R=Object(l.a)(e=>{const{rich_summary:t}=e.pin;return t?{...e,richSummary:t}:null});var O=Object(l.a)(e=>{const{title:t}=e.richMetadata;return t?{...e,title:t}:null});var V=Object(l.a)(e=>{const{pin:t,inChangeTitlesExp:i}=e,{carousel_data:a,title:n,closeup_unified_title:s}=t;let o=i?s:n;if(a){const{carousel_slots:e=[],index:t}=a;e[t]&&e[t].title&&(o=e[t].title)}return o?{...e,title:o}:null});var I=Object(l.a)(e=>{const{richMetadata:t}=e,{tutorial:i}=t,{name:a,description:n,from_aggregated_data:s}=i||{};return i&&a?{...e,tutorial:{name:a,description:n,fromAggregatedData:s}}:null}),j=i("2i+x");var M=Object(l.a)(e=>{const{videos:t}=e.pin,{id:i,video_list:a={}}=t||{},{V_720P:n,V_HLSV4:s,V_HLSV3_MOBILE:o}=a,r=Object(j.a)(s),l=Object(j.a)(o),c=Object(j.a)(n),d=c||r||l;return i&&d?{...e,video:{id:i,hasVideo:d,mp4:c||void 0,hls:r||void 0,hlsv3:l||void 0}}:null});var C=Object(l.a)(e=>{const{video:t}=M(Object(T.a)(e))||{},{embed:i}=f(Object(T.a)(e))||{},a=!(!t||!(e=>{const{hlsv3:t,hls:i}=e,a=t||i;return!!a&&a.width>a.height})(t))||!(!i||!i.src||"pinstory"===i.subtype||"gif"===i.type);return{...e,isWideVideo:a}});function _({pin:e,boardCount:t}){return(!e.content_sensitivity||!e.content_sensitivity.is_sensitive_content)&&(void 0!==t&&t>=1)}var A=i("Zygf"),x=e=>!(e&&e.pinner&&e.pinner.blocked_by_me||e&&Object(A.a)(e))},"9pre":function(e,t,i){i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s}));const a=5,n="V_HLSV3_MOBILE",s=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},BEAQ:function(e,t,i){i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return f}));var a=i("nKUr"),n=i("q1tI"),s=i("PioT"),o=i("v/Q4"),r=i("U4JR"),l=i("pLLR"),c=i("n6mq"),d=i("Xy1J"),h=i("Lic6");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class p extends n.Component{constructor(...e){super(...e),u(this,"state",{canPlayVideo:!1,playbackState:d.h.LOADING}),u(this,"componentDidMount",()=>{const{playing:e}=this.props;Object(h.c)("videoMounted",!1),e&&(this.videoVisibleTime=new Date,Object(h.c)("sessionStart",!1,{initiator:"mount"}),this.logPlaybackPerformance(d.g))}),u(this,"componentDidUpdate",(e,t)=>{const{playing:i}=this.props,{canPlayVideo:a}=this.state;t.playbackState!==d.h.PAUSED&&t.playbackState!==d.h.SEEKING&&t.playbackState!==d.h.STALLING&&!1===e.playing&&i&&(this.videoVisibleTime=new Date,Object(h.c)("sessionStart",!1,{initiator:"update"}),this.logPlaybackPerformance(d.g),a&&this.setStartupReadyTime())}),u(this,"currentVideoTime",-1),u(this,"hasVideoSessionEnded",!1),u(this,"stallTimestamp",null),u(this,"startPlayTime",null),u(this,"videoRefSetTime",null),u(this,"videoSessionId",""),u(this,"videoVisibleTime",null),u(this,"playbackPerformance",{fatalErrorMsg:null,numStalls:0,startupLoadTimeMs:null,startupReadyTimeMs:null,totalPlayDuration:0,totalStallDurationMs:0}),u(this,"setStartupReadyTime",()=>{!this.playbackPerformance.startupReadyTimeMs&&this.videoVisibleTime&&(this.playbackPerformance.startupReadyTimeMs=new Date-this.videoVisibleTime)}),u(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props,{playbackState:i}=this.state;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoRefSetTime=new Date,this.videoPlayerRef.video&&this.videoRefSetTime)){const e=this.videoPlayerRef.video,t=this.videoRefSetTime;e.addEventListener("playing",()=>{this.setState({playbackState:d.h.PLAYING})}),e.addEventListener("pause",()=>{this.setState({playbackState:d.h.PAUSED})}),e.addEventListener("waiting",()=>{null!=this.startPlayTime&&(this.playbackPerformance.totalPlayDuration+=this.currentVideoTime-this.startPlayTime,this.startPlayTime=null),i!==d.h.STALLING&&(this.playbackPerformance.numStalls+=1,this.stallTimestamp=new Date),this.setState({playbackState:d.h.STALLING})}),e.addEventListener("error",()=>{this.playbackPerformance.fatalErrorMsg="Video failed loading",this.setState({playbackState:d.h.FAILED})}),e.addEventListener("loadeddata",()=>{this.playbackPerformance.startupLoadTimeMs||(this.playbackPerformance.startupLoadTimeMs=new Date-t)}),e.readyState>=3&&this.setState({canPlayVideo:!0})}}),u(this,"startVideoPlaybackTimings",()=>{const{playbackState:e}=this.state,t=()=>{null!=this.stallTimestamp&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.stallTimestamp,this.stallTimestamp=null)};window.clearInterval(this.videoPlaybackIntervalId),this.videoPlaybackIntervalId=window.setInterval(()=>{if(!this.videoPlayerRef||!this.videoPlayerRef.video)return;const i=this.videoPlayerRef.video.currentTime,a=i*d.d;if(-1===this.currentVideoTime)return void(this.currentVideoTime=i);const n=a-(this.currentVideoTime*d.d+d.c);Math.abs(n)>d.e?(Math.abs(a-this.currentVideoTime*d.d)<d.e&&e!==d.h.PAUSED?this.stallTimestamp||(this.playbackPerformance.numStalls+=1,this.stallTimestamp=new Date):this.stallTimestamp&&t(),null!=this.startPlayTime&&(this.playbackPerformance.totalPlayDuration+=this.currentVideoTime-this.startPlayTime,this.startPlayTime=null)):(null==this.startPlayTime&&(this.startPlayTime=this.currentVideoTime),this.stallTimestamp&&t()),this.currentVideoTime=i},d.c)}),u(this,"logPlaybackPerformance",e=>{const{contextLogData:t,src:i,userId:a}=this.props,n=this.videoPlayerRef&&this.videoPlayerRef.video,s=this.videoRefSetTime,o=e===d.g,l=!this.hasVideoSessionEnded&&!!this.videoVisibleTime;if(n&&s&&(o||l)){const s="string"==typeof i?i:i[0].src;let l={};o?this.videoSessionId=Object(d.i)(a):(null!=this.startPlayTime&&(this.playbackPerformance.totalPlayDuration+=this.currentVideoTime-this.startPlayTime,this.startPlayTime=null),null!=this.stallTimestamp&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.stallTimestamp,this.stallTimestamp=null),l={nativeVideoDurationMs:n.duration*d.d,startupTimeMs:this.playbackPerformance.startupLoadTimeMs||-1,startupLatencyMs:this.playbackPerformance.startupReadyTimeMs||-1,overallWatchedDurationMs:this.playbackPerformance.totalPlayDuration*d.d,numberOfStalls:this.playbackPerformance.numStalls,rebufferRate:this.playbackPerformance.totalStallDurationMs/(this.playbackPerformance.totalPlayDuration*d.d),fatalError:!!this.playbackPerformance.fatalErrorMsg});const c={isCellular:!1,sessionMark:e,startupPlayerWidth:n.clientWidth,startupPlayerHeight:n.clientHeight,videoUrl:s,...l};Object(h.a)(c,!1),Object(r.b)(3606,{...t,playback_session_id:this.videoSessionId,eventData:{videoPerformanceData:c}}),o||(this.videoSessionId="",this.hasVideoSessionEnded=!0)}}),u(this,"handleCanPlayVideo",e=>{const{onReady:t,playing:i,videoStartTime:a}=this.props,{canPlayVideo:n}=this.state;n||(i&&(this.setStartupReadyTime(),this.startVideoPlaybackTimings()),null!=a&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=a)),this.setState({canPlayVideo:!0}),t&&t(e)}),u(this,"handleEnded",e=>{const{loop:t,onEnded:i}=this.props;t||(this.setState({playbackState:d.h.ENDED}),Object(h.c)("sessionEnd",!1,{initiator:"videoEnded",loop:t}),this.logPlaybackPerformance(d.f)),i&&i(e)}),u(this,"handleSeek",e=>{const{onSeek:t}=this.props;this.setState({playbackState:d.h.SEEKING}),t&&t(e)})}componentWillUnmount(){const{loop:e}=this.props;this.hasVideoSessionEnded||Object(h.c)("sessionEnd",!1,{initiator:"unmount",loop:e}),this.logPlaybackPerformance(d.f),window.clearInterval(this.videoPlaybackIntervalId)}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,controls:d,loop:h,loopOveride:u,objectFit:p,onDurationChange:m,onFullscreenChange:y,onLoadedChange:b,onPause:v,onPlay:f,onPlayheadDown:g,onPlayheadUp:P,onTimeChange:S,onVolumeChange:T,playbackRate:w,playing:L,playsInline:k,poster:E,preload:D,src:R,volume:O}=this.props,{canPlayVideo:V}=this.state;return Object(a.jsx)(c.fb,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,controls:d,loop:void 0===u?h:u,objectFit:p,onDurationChange:m,onEnded:this.handleEnded,onFullscreenChange:y,onLoadedChange:b,onPause:v,onPlay:f,onPlayheadDown:g,onPlayheadUp:P,onReady:this.handleCanPlayVideo,onSeek:this.handleSeek,onTimeChange:S,onVolumeChange:T,playbackRate:w,playing:V&&L,playsInline:k,poster:E,preload:D,ref:this.setVideoPlayerRef,src:R,volume:O})}}var m=Object(n.memo)((function(e){const{country:t,isAuthenticated:i,isBot:n,isSocialBot:s,unauthId:r,userAgent:c}=Object(l.d)(),{browserName:d,browserVersion:u}=c,m=Object(o.a)(),y={browserName:d,browserVersion:u,country:t,isAuthenticated:i,isBot:n,isSocialBot:s};return Object(h.b)(y),Object(a.jsx)(p,{...e,userId:m.id||r})})),y=i("aFfM");function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const v=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class f extends n.PureComponent{constructor(e){super(e),b(this,"componentDidUpdate",(e,t)=>{var i;e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&null!==(i=this.videoPlayerRef)&&void 0!==i&&i.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)}),b(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),b(this,"handleOnEnded",({event:e})=>{const{loop:t,onLoop:i,onEnded:a}=this.props;a&&(a({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))});const t=v(e.src);this.state={useHlsVideo:!s.b.isSafari()&&!!t}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,contextLogData:c,controls:d,hlsConfig:h,loop:u,objectFit:p,onDurationChange:b,onEnded:f,onFullscreenChange:g,onLoadedChange:P,onPause:S,onPlay:T,onPlayheadDown:w,onPlayheadUp:L,onReady:k,onSeek:E,onTimeChange:D,onVolumeChange:R,playbackRate:O,playing:V,playsInline:I,poster:j,preload:M,src:C,videoStartTime:_,volume:A}=this.props,{useHlsVideo:x}=this.state,U=v(C),N={...h,startPosition:_||-1},F=!f&&u;return x&&U?Object(a.jsx)(y.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,contextLogData:c,controls:d,hlsConfig:N,loop:u,loopOveride:F,onDurationChange:b,onEnded:this.handleOnEnded,onFullscreenChange:g,onLoadedChange:P,onPause:S,onPlay:T,onPlayheadDown:w,onPlayheadUp:L,onReady:k,onSeek:E,onTimeChange:D,onVolumeChange:R,playbackRate:O,playing:V,playsInline:I,poster:j,preload:M,setVideoRef:this.setVideoPlayerRef,src:U,volume:A}):Object(a.jsx)(m,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,contextLogData:c,controls:d,loop:u,loopOveride:F,objectFit:p,onDurationChange:b,onEnded:this.handleOnEnded,onFullscreenChange:g,onLoadedChange:P,onPause:S,onPlay:T,onPlayheadDown:w,onPlayheadUp:L,onReady:k,onSeek:E,onTimeChange:D,onVolumeChange:R,playbackRate:O,playing:V,playsInline:I,poster:j,preload:M,setVideoRef:this.setVideoPlayerRef,src:U||C,videoStartTime:_,volume:A})}}},Lic6:function(e,t,i){i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"a",(function(){return h}));var a=i("7w6Q"),n=i("Xy1J");const s=["isCellular","videoUrl","sessionMark"],o=["fatalError"];let r={},l="";const c=e=>{const{browserName:t,browserVersion:i,country:a,isAuthenticated:n,isBot:s,isSocialBot:o}=e;l=(o?"socialBot":s&&"bot")||"nonbot";const c=(e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}})(a);r={browserName:t,browserVersion:(null==i?void 0:i.split(".")[0])||"0",isAuthenticated:n,region:c}};function d(e,t,i={}){const n=t?"hls":"nonHls",s={...i,...r},o=`web.video.${n}.${l}.${e}`;a.a.increment(o,1,s)}function h(e,t,i={}){const c=t?"hls":"nonHls",d=e.sessionMark===n.g?"sessionStart":"sessionEnd",h={...i,...r};Object.entries(e).forEach(([e,t])=>{const i=`web.video.${c}.${l}.${d}.${e}`;s.includes(e)||(o.includes(e)&&t?a.a.increment(i,1,h):"number"==typeof t&&t>-1&&(a.a.timing(i,t,1),a.a.timing(i+"._with_tags",t,1,h)))})}},MhBu:function(e,t,i){function a(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}i.d(t,"a",(function(){return a}))},Nle8:function(e,t,i){i.d(t,"a",(function(){return s}));var a=i("ajUs"),n=i("zpPL");function s(e,t){const i=n.a.instance;let s;if(i){const n=i.getState();if(n.pins&&e){const i=n.pins[e],o=n.location;if(null!=t&&t.shouldTrackForPrevLocation){const e=(null==i?void 0:i.tracking_params_map)||{},t=Object.keys(e).find(e=>"PinResource"!==e);i&&(s=t?e[t]:e.PinResource)}else i&&(s=Object(a.a)(i,o))}}return s}},"O1y+":function(e,t,i){var a=i("pOug");const n=Object(a.a)(e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null);t.a=n},PsyL:function(e,t,i){t.a=function({hours:e,minutes:t}){return`PT${e}H${t}`}},Xy1J:function(e,t,i){i.d(t,"g",(function(){return n})),i.d(t,"f",(function(){return s})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return u}));var a=i("7Cbv");const n=1,s=2,o=250,r=1e3,l=200,c=1e3,d=300,h=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,SEEKING:3,STALLING:4,FAILED:5,ENDED:6});function u(e){return e+"-"+Object(a.a)()}},Zygf:function(e,t,i){function a(e){return Boolean(e.promoted_is_removable)}i.d(t,"a",(function(){return a}))},aFfM:function(e,t,i){var a=i("nKUr"),n=i("q1tI"),s=i("ulZh"),o=i.n(s),r=i("v/Q4"),l=i("U4JR"),c=i("pLLR"),d=i("n6mq"),h=i("Xy1J"),u=i("Lic6");function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(){return(new Date).getTime()}class y extends n.PureComponent{constructor(...e){super(...e),p(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:h.h.LOADING}),p(this,"currentVideoTime",-1),p(this,"hasVideoSessionEnded",!1),p(this,"hls",null),p(this,"videoSessionId",""),p(this,"videoVisibleTime",null),p(this,"playbackPerformance",{fatalErrorMsg:"",firstLevelFetchTime:0,firstFragmentParsedTime:0,hasFatalError:!1,levelWatchDurationsMs:[],numStalls:0,rebufferingDurationMs:0,startupReadyTimeMs:null,videoCreatedTime:0}),p(this,"initializeHls",()=>{this.destroyHls();const{src:e,hlsConfig:t}=this.props,i=new o.a(t);i.loadSource(e),this.videoPlayerRef&&i.attachMedia(this.videoPlayerRef.video),i.on(o.a.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0}),this.startVideoWatchTimings()}),i.on(o.a.Events.FRAG_PARSED,(e,t)=>{this.playbackPerformance.firstFragmentParsedTime||(this.playbackPerformance.firstFragmentParsedTime=m())}),i.on(o.a.Events.LEVEL_LOADING,(e,t)=>{this.playbackPerformance.firstLevelFetchTime||(this.playbackPerformance.firstLevelFetchTime=m())}),i.on(o.a.Events.ERROR,(e,t)=>{t.fatal&&(this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.fatalErrorMsg=t.details),t.details===o.a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.playbackPerformance.numStalls+=1,t.buffer&&(this.playbackPerformance.rebufferingDurationMs+=t.buffer*h.d))}),this.hls=i}),p(this,"destroyHls",()=>{const{hls:e}=this;e&&e.destroy(),window.clearInterval(this.videoTimeIntervalId)}),p(this,"setStartupReadyTime",()=>{!this.playbackPerformance.startupReadyTimeMs&&this.videoVisibleTime&&(this.playbackPerformance.startupReadyTimeMs=new Date-this.videoVisibleTime)}),p(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("playing",()=>{this.setState({playbackState:h.h.PLAYING})}),e.addEventListener("pause",()=>{this.setState({playbackState:h.h.PAUSED})}),e.addEventListener("waiting",()=>{this.setState({playbackState:h.h.STALLING})}),e.addEventListener("error",()=>{this.setState({playbackState:h.h.FAILED})}),e.readyState>=3&&this.setState({canPlayVideo:!0})}}),p(this,"startVideoWatchTimings",()=>{window.clearInterval(this.videoTimeIntervalId),this.videoTimeIntervalId=window.setInterval(()=>{if(!this.hls||this.hls.currentLevel<=0||!this.videoPlayerRef||!this.videoPlayerRef.video)return;const e=this.videoPlayerRef.video.currentTime*h.d,{levelWatchDurationsMs:t}=this.playbackPerformance;if(t.length){if(this.hls.currentLevel!==t[t.length-1].level){const i=t.length-1;t[i].duration+=this.currentVideoTime-t[i].lastStartSegmentTime,t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0})}else if(e<this.currentVideoTime||e-this.currentVideoTime>h.b){const i=t.length-1;t[i].duration+=this.currentVideoTime-t[i].lastStartSegmentTime,t[i].lastStartSegmentTime=e}}else t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0});this.currentVideoTime=e},h.c)}),p(this,"logPlaybackPerformance",e=>{const{contextLogData:t,src:i,userId:a}=this.props,{firstLevelFetchTime:n,firstFragmentParsedTime:s,hasFatalError:o,levelWatchDurationsMs:r,numStalls:c,rebufferingDurationMs:d}=this.playbackPerformance,p=this.videoPlayerRef&&this.videoPlayerRef.video,m=e===h.g,y=!this.hasVideoSessionEnded&&r.length>0;if(this.hls&&p&&(m||y)){const y="string"==typeof i?i:i[0].src;let b={};if(m)this.videoSessionId=Object(h.i)(a);else{const e=this.hls.levels,t=e[r[0].level]||{},i=p.currentTime*h.d;r[r.length-1].duration+=i-r[r.length-1].lastStartSegmentTime;const a=r.reduce((t,i)=>t+i.level*(e[i.level]||{}).bitrate*(i.duration||0)/h.d,0),l=r.reduce((e,t)=>e+(t.duration||0),0);b={nativeVideoDurationMs:p.duration*h.d,startupTimeMs:s-n,startupLatencyMs:this.playbackPerformance.startupReadyTimeMs||-1,startupVariantKbps:t.bitrate/h.a,startupVariantWatchedDurationMs:r[0].duration,startupVariantWidth:t.width,averageVideoKbps:a/(l/h.d),overallWatchedDurationMs:l,numberOfStalls:c,rebufferRate:d/l,fatalError:o}}const v={isCellular:!1,sessionMark:e,startupPlayerWidth:p.clientWidth,startupPlayerHeight:p.clientHeight,videoUrl:y,...b};Object(u.a)(v,!0),Object(l.b)(3606,{...t,playback_session_id:this.videoSessionId,eventData:{videoPerformanceData:v}}),m||(this.videoSessionId="",this.hasVideoSessionEnded=!0)}}),p(this,"handleCanPlayVideo",e=>{const{onReady:t,playing:i}=this.props,{canPlayVideo:a}=this.state;!a&&i&&this.setStartupReadyTime(),this.setState({canPlayVideo:!0}),t&&t(e)}),p(this,"handleEnded",e=>{const{loop:t,onEnded:i}=this.props;t||(this.setState({playbackState:h.h.ENDED}),Object(u.c)("sessionEnd",!0,{initiator:"videoEnded",loop:t}),this.logPlaybackPerformance(h.f)),i&&i(e)}),p(this,"handleSeek",e=>{const{onSeek:t}=this.props;this.setState({playbackState:h.h.SEEKING}),t&&t(e)})}componentDidMount(){const{playing:e}=this.props;this.playbackPerformance.videoCreatedTime=m(),this.initializeHls(),Object(u.c)("videoMounted",!0),e&&(this.videoVisibleTime=new Date,Object(u.c)("sessionStart",!0,{initiator:"mount"}),this.logPlaybackPerformance(h.g))}componentDidUpdate(e,t){const{playing:i,src:a}=this.props,{canPlayVideo:n}=this.state;var s,o;(typeof(s=e.src)!=typeof(o=a)||(Array.isArray(o)?s.length!==o.length||o.some((e,t)=>!Array.isArray(s)||e.type!==s[t].type||e.src!==s[t].src):o!==s))&&this.initializeHls(),t.playbackState!==h.h.PAUSED&&t.playbackState!==h.h.SEEKING&&t.playbackState!==h.h.STALLING&&!1===e.playing&&i&&(this.videoVisibleTime=new Date,Object(u.c)("sessionStart",!0,{initiator:"update"}),this.logPlaybackPerformance(h.g),n&&this.setStartupReadyTime())}componentWillUnmount(){const{loop:e}=this.props;this.hasVideoSessionEnded||Object(u.c)("sessionEnd",!0,{initiator:"unmount",loop:e}),this.logPlaybackPerformance(h.f),this.destroyHls()}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,controls:c,loop:h,loopOveride:u,onDurationChange:p,onFullscreenChange:m,onLoadedChange:y,onPause:b,onPlay:v,onPlayheadDown:f,onPlayheadUp:g,onTimeChange:P,onVolumeChange:S,playbackRate:T,playing:w,playsInline:L,poster:k,preload:E,src:D,volume:R}=this.props,{canPlayVideo:O,isManifestParsed:V}=this.state;return Object(a.jsx)(d.fb,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:s,accessibilityUnmuteLabel:o,aspectRatio:r,captions:l,controls:c,loop:void 0===u?h:u,onDurationChange:p,onEnded:this.handleEnded,onFullscreenChange:m,onLoadedChange:y,onPause:b,onPlay:v,onPlayheadDown:f,onPlayheadUp:g,onReady:this.handleCanPlayVideo,onSeek:this.handleSeek,onTimeChange:P,onVolumeChange:S,playbackRate:T,playing:V&&O&&w,playsInline:L,poster:k,preload:E,ref:this.setVideoPlayerRef,src:D,volume:R})}}t.a=Object(n.memo)((function(e){const{country:t,isAuthenticated:i,isBot:n,isSocialBot:s,unauthId:o,userAgent:l}=Object(c.d)(),{browserName:d,browserVersion:h}=l,p=Object(r.a)(),m={browserName:d,browserVersion:h,country:t,isAuthenticated:i,isBot:n,isSocialBot:s};return Object(u.b)(m),Object(a.jsx)(y,{...e,userId:p.id||o})}))},jgRP:function(e,t,i){i.d(t,"a",(function(){return a}));const a=e=>{if("undefined"==typeof window)return"";let t=0;const i=document.querySelector('[data-test-id="header"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:i}=e.getBoundingClientRect();t+=i}break;case"SearchItem":const i=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const a=document.querySelector('[data-test-id="search-tab-bar"]');if(null!==a){const{height:e}=a.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"}},pOug:function(e,t,i){t.a=function(e){return function(t){return null!=t?e(t):null}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/12-c6291c755fbf5476590a.mjs.map